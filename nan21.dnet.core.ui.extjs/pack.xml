<project name="dnet-ui-extjs-core" default="run" basedir=".">
	<description>
		Pack the javascript files
    </description>

	<property name="concatFile" value="dnet-ui-extjs-core-all-debug.js" />
	<property name="minFile" value="dnet-ui-extjs-core-all.js" />

	<property name="sourcePathJs" value="src/main/resources/webapp/js" />
	<property name="targetPathJs" value="target/classes/webapp/js" />
	<property name="sourcePathResources" value="src/main/resources/webapp/resources" />
    <property name="targetPathResources" value="target/classes/webapp/resources" />

	<property name="yui.path" value="yui.path" />

	<target name="run" depends="pack, minimize">
		<echo>Done.</echo>
	</target>

	<!-- ================================= Implementation ================================== -->


	<target name="minimize" description="Minimize file.">
		<echo message="Minimizing file..." />
		<apply executable="java" parallel="false">
			<filelist dir="${targetPathJs}" files="${concatFile}" />
			<arg line="-jar" />
			<arg path="${yui.path}" />
			<srcfile />
			<arg line="-o" />
			<mapper type="glob" from="*-debug.js" to="${targetPathJs}/*.js" />
			<targetfile />
		</apply>
		<echo message="Done." />
	</target>

	<target name="pack">
		<echo>[CORE] Packing javascript files in dnet-ui-extjs-core... </echo>
		<concat destfile="${targetPathJs}/${concatFile}">
			<filelist dir="${sourcePathJs}" files="Dnet.js" />
			<filelist dir="${sourcePathJs}" files="extjs-extend.js,extjs-ux-extend.js" />
			<fileset dir="${sourcePathJs}/dnet" includes="**/*.js" />
		</concat>
		<echo message="Done." />
	</target>
</project>